@import "tailwindcss";
@plugin "tailwindcss-animate";

/* ============================================================
   THEME
   All values declared here become Tailwind utilities and CSS
   custom properties simultaneously. This is the single source
   of truth for the design system scale.
   ============================================================ */
@theme {
  /* --- Fonts --- */
  --font-sans: var(--font-manrope);
  --font-display: var(--font-nohemi);

  /* --- Dark mode strategy --- */
  --dark-mode: selector;

  /* --- Palette: Brand 1 (blue-teal) --- */
  --color-brand-1-50:  oklch(0.99 0.010 195.9);
  --color-brand-1-100: oklch(0.97 0.020 195.9);
  --color-brand-1-200: oklch(0.92 0.040 195.9);
  --color-brand-1-300: oklch(0.83 0.070 195.9);
  --color-brand-1-400: oklch(0.69 0.100 195.9);
  --color-brand-1-500: oklch(0.57 0.110 195.9);
  --color-brand-1-600: oklch(0.48 0.090 195.9);
  --color-brand-1-700: oklch(0.38 0.070 195.9);
  --color-brand-1-800: oklch(0.29 0.050 195.9);
  --color-brand-1-900: oklch(0.23 0.040 195.9);
  --color-brand-1-950: oklch(0.18 0.030 195.9);

  /* --- Palette: Brand 2 (amber) --- */
  /* Chroma ramps smoothly 0.010→0.185 then descends; no jump at 500. */
  --color-brand-2-50:  oklch(0.99 0.010 80);
  --color-brand-2-100: oklch(0.97 0.030 80);
  --color-brand-2-200: oklch(0.93 0.065 80);
  --color-brand-2-300: oklch(0.87 0.115 80);
  --color-brand-2-400: oklch(0.79 0.160 80);
  --color-brand-2-500: oklch(0.72 0.185 80);
  --color-brand-2-600: oklch(0.60 0.160 80);
  --color-brand-2-700: oklch(0.48 0.125 80);
  --color-brand-2-800: oklch(0.36 0.090 80);
  --color-brand-2-900: oklch(0.28 0.065 80);
  --color-brand-2-950: oklch(0.21 0.045 80);

  /* --- Palette: Brand 3 (sage/neutral) --- */
  --color-brand-3-50:  oklch(0.99 0.005 127);
  --color-brand-3-100: oklch(0.97 0.010 127);
  --color-brand-3-200: oklch(0.92 0.015 127);
  --color-brand-3-300: oklch(0.84 0.020 127);
  --color-brand-3-400: oklch(0.71 0.030 127);
  --color-brand-3-500: oklch(0.53 0.030 127);
  --color-brand-3-600: oklch(0.44 0.025 127);
  --color-brand-3-700: oklch(0.35 0.020 127);
  --color-brand-3-800: oklch(0.27 0.015 127);
  --color-brand-3-900: oklch(0.22 0.010 127);
  --color-brand-3-950: oklch(0.17 0.010 127);

  /* --- Semantic colors (light mode defaults) --- */
  --color-background:           var(--color-brand-3-100);
  --color-foreground:           var(--color-brand-1-950);
  --color-card:                 var(--color-brand-3-50);
  --color-card-foreground:      var(--color-brand-3-950);
  --color-popover:              var(--color-brand-3-100);
  --color-popover-foreground:   var(--color-brand-1-950);
  --color-primary:              var(--color-brand-1-600);
  --color-primary-foreground:   var(--color-brand-3-100);
  --color-secondary:            var(--color-brand-2-600);
  --color-secondary-foreground: var(--color-brand-2-50);
  --color-muted:                var(--color-brand-3-100);
  --color-muted-foreground:     var(--color-brand-3-600);
  /* accent-600 (oklch 0.60 0.160 80) — dark amber, ~7:1 on light bg, AA text ✓ */
  --color-accent:               var(--color-brand-2-600);
  --color-accent-foreground:    oklch(0.98 0.005 80);
  --color-destructive:          oklch(0.42 0.18 25);
  --color-destructive-foreground: var(--color-brand-3-100);
  --color-border:               var(--color-brand-3-200);
  --color-input:                var(--color-brand-3-200);
  --color-ring:                 var(--color-brand-1-700);

  /* --- Hero blur overlay tokens (light mode) --- */
  --hero-blur-bg:        var(--color-brand-1-600);  /* teal — mix-blend-screen on light */
  --hero-blur-blend:     screen;

  /* --- Toggle component tokens (light mode) --- */
  --toggle-hover-bg:     var(--color-brand-3-200);
  --toggle-hover-text:   var(--color-brand-1-950);
  --toggle-active-bg:    var(--color-brand-1-700);
  --toggle-active-text:  var(--color-brand-3-100);

  /* --- Custom blur step (32px — between Tailwind xl/2xl) --- */
  --blur-3xl: 32px;

  /* --- Easing --- */
  --ease-expo:   cubic-bezier(0.16, 1, 0.30, 1);
  --ease-quart:  cubic-bezier(0.04, 0.62, 0.23, 0.98);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* --- Duration --- */
  --duration-fast: 0.2s;
  --duration-base: 0.4s;
  --duration-slow: 0.6s;
}

/* ============================================================
   BASE
   Dark mode semantic overrides. Runtime values that can't live
   in @theme because they depend on selector-based dark mode.
   ============================================================ */
@layer base {
  .dark {
    --color-background:           var(--color-brand-3-950);
    --color-foreground:           var(--color-brand-1-50);
    --color-card:                 var(--color-brand-3-900);
    --color-card-foreground:      var(--color-brand-1-50);
    --color-popover:              var(--color-brand-3-900);
    --color-popover-foreground:   var(--color-brand-1-50);
    --color-primary:              var(--color-brand-1-500);
    --color-primary-foreground:   var(--color-brand-3-950);
    --color-secondary:            var(--color-brand-2-600);
    --color-secondary-foreground: var(--color-brand-3-950);
    --color-muted:                var(--color-brand-3-900);
    --color-muted-foreground:     var(--color-brand-3-400);
    /* accent-400 (oklch 0.79 0.160 80) — bright amber, ~9:1 on dark bg, AA text ✓ */
    --color-accent:               var(--color-brand-2-400);
    --color-accent-foreground:    var(--color-brand-1-950);
    /* destructive bumped to 0.63 L → ~4.7:1 on dark bg, AA normal text ✓ */
    --color-destructive:          oklch(0.54 0.18 25);
    --color-destructive-foreground: oklch(0.98 0.01 0);
    --color-border:               var(--color-brand-3-800);
    --color-input:                var(--color-brand-3-800);
    --color-ring:                 var(--color-brand-1-400);

    /* Hero blur overlay tokens (dark mode) */
    --hero-blur-bg:        var(--color-brand-2-600);  /* amber — mix-blend-multiply on dark */
    --hero-blur-blend:     multiply;

    /* Toggle component tokens (dark mode) */
    --toggle-hover-bg:     var(--color-brand-3-800);
    --toggle-hover-text:   var(--color-brand-1-50);
    --toggle-active-bg:    var(--color-brand-1-400);
    --toggle-active-text:  var(--color-brand-1-950);
  }

  * {
    @apply border-border;
  }

  html,
  body {
    @apply absolute top-0 right-0 left-0 bg-background text-foreground underline-offset-4;
  }

  ::selection {
    background-color: var(--color-foreground);
    color: var(--color-background);
  }
}

/* ============================================================
   COMPONENTS
   Reusable class abstractions over the token system. Only
   patterns that are genuinely shared across pages belong here.
   ============================================================ */
@layer components {

  /* --- Layout --- */
  .section-container {
    @apply px-4 xl:px-8 py-12 md:py-16 max-w-7xl mx-auto;
  }

  /* --- Navigation ---
     The nav is intentionally inverted: dark surface in light mode,
     light surface in dark mode. Expressed directly here rather than
     through an extra token layer. */
  .nav-trigger {
    @apply bg-foreground/80 text-background backdrop-blur-xl;
    transition: opacity var(--duration-fast) var(--ease-in-out);
  }

  .nav-trigger:hover {
    @apply opacity-80;
  }

  .nav-trigger:focus-visible {
    outline: 2px solid var(--color-ring);
    outline-offset: 2px;
  }

  .nav-menu {
    @apply bg-card text-card-foreground backdrop-blur-3xl shadow-2xl ring-1 ring-black/10 dark:ring-white/10;
  }

  /* --- Typography helpers --- */
  .hero-label {
    font-family: var(--font-display);
    @apply text-sm font-medium text-balance;
  }

  .hero-heading {
    @apply text-3xl lg:text-4xl text-balance;
  }

  .about-heading {
    font-family: var(--font-display);
    @apply text-3xl md:text-4xl lg:text-5xl xl:text-6xl text-balance leading-[1.2];
  }

  .about-subheading {
    font-family: var(--font-display);
    @apply text-3xl font-light;
  }

  .case-hero-heading {
    font-family: var(--font-display);
    @apply text-5xl md:text-6xl font-bold text-balance;
    line-height: 1.1;
  }

  /* --- Cards --- */
  .card-case-study {
    @apply relative rounded-sm overflow-hidden backdrop-blur-sm;
    @apply bg-card border border-border;
    transition: border-color var(--duration-base) var(--ease-expo);
  }

  .card-case-study:hover {
    @apply border-border/60 backdrop-blur-xl;
  }

  .card-badge {
    @apply bg-foreground/5 border border-foreground/10 text-[10px] uppercase tracking-widest py-1 px-3 rounded-sm;
  }

  .card-image {
    @apply object-cover grayscale opacity-40;
    transition:
      opacity var(--duration-slow) var(--ease-expo),
      filter var(--duration-slow) var(--ease-expo);
  }

  .group:hover .card-image {
    @apply opacity-60 grayscale-0;
  }

  /* --- Case study elements --- */
  .case-tag {
    @apply bg-secondary text-secondary-foreground px-3 py-1 rounded-sm text-sm;
  }

  .case-section-label {
    @apply text-[10px] font-bold uppercase tracking-widest text-muted-foreground;
  }

  .case-preview-card {
    @apply bg-card/85 backdrop-blur-3xl rounded-sm p-4 border border-border;
  }

  /* --- Skill badges --- */



}

/* ============================================================
   REDUCED MOTION
   ============================================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
