@import "tailwindcss";
@plugin "tailwindcss-animate";

/* ============================================================
   THEME
   All values declared here become Tailwind utilities and CSS
   custom properties simultaneously. This is the single source
   of truth for the design system scale.
   ============================================================ */
@theme {
  /* --- Fonts --- */
  --font-sans: var(--font-manrope);
  --font-display: var(--font-nohemi);

  /* --- Dark mode strategy --- */
  --dark-mode: selector;

  /* --- Palette: Brand 1 (blue-teal) --- */
  --color-brand-1-50:  oklch(0.99 0.010 195.9);
  --color-brand-1-100: oklch(0.97 0.020 195.9);
  --color-brand-1-200: oklch(0.92 0.040 195.9);
  --color-brand-1-300: oklch(0.83 0.070 195.9);
  --color-brand-1-400: oklch(0.69 0.100 195.9);
  --color-brand-1-500: oklch(0.57 0.110 195.9);
  --color-brand-1-600: oklch(0.48 0.090 195.9);
  --color-brand-1-700: oklch(0.38 0.070 195.9);
  --color-brand-1-800: oklch(0.29 0.050 195.9);
  --color-brand-1-900: oklch(0.23 0.040 195.9);
  --color-brand-1-950: oklch(0.18 0.030 195.9);

  /* --- Palette: Brand 2 (amber) --- */
  --color-brand-2-50:  oklch(0.99 0.010 80);
  --color-brand-2-100: oklch(0.97 0.030 80);
  --color-brand-2-200: oklch(0.93 0.060 80);
  --color-brand-2-300: oklch(0.86 0.110 80);
  --color-brand-2-400: oklch(0.77 0.150 80);
  --color-brand-2-500: oklch(0.76 0.200 80);
  --color-brand-2-600: oklch(0.62 0.160 80);
  --color-brand-2-700: oklch(0.49 0.120 80);
  --color-brand-2-800: oklch(0.36 0.090 80);
  --color-brand-2-900: oklch(0.28 0.070 80);
  --color-brand-2-950: oklch(0.21 0.050 80);

  /* --- Palette: Brand 3 (sage/neutral) --- */
  --color-brand-3-50:  oklch(0.99 0.005 127);
  --color-brand-3-100: oklch(0.97 0.010 127);
  --color-brand-3-200: oklch(0.92 0.015 127);
  --color-brand-3-300: oklch(0.84 0.020 127);
  --color-brand-3-400: oklch(0.71 0.030 127);
  --color-brand-3-500: oklch(0.53 0.030 127);
  --color-brand-3-600: oklch(0.44 0.025 127);
  --color-brand-3-700: oklch(0.35 0.020 127);
  --color-brand-3-800: oklch(0.27 0.015 127);
  --color-brand-3-900: oklch(0.22 0.010 127);
  --color-brand-3-950: oklch(0.17 0.010 127);

  /* --- Semantic colors (light mode defaults) --- */
  --color-background:         var(--color-brand-3-100);
  --color-foreground:         var(--color-brand-1-950);
  --color-card:               var(--color-brand-1-50);
  --color-card-foreground:    var(--color-brand-1-950);
  --color-popover:            var(--color-brand-3-100);
  --color-popover-foreground: var(--color-brand-1-950);
  --color-primary:            var(--color-brand-1-700);
  --color-primary-foreground: var(--color-brand-3-100);
  --color-secondary:          var(--color-brand-3-200);
  --color-secondary-foreground: var(--color-brand-1-950);
  --color-muted:              var(--color-brand-3-100);
  --color-muted-foreground:   var(--color-brand-3-700);
  --color-accent:             var(--color-brand-2-500);
  --color-accent-foreground:  var(--color-brand-1-950);
  --color-destructive:        oklch(0.40 0.17 25);
  --color-destructive-foreground: var(--color-brand-3-100);
  --color-border:             oklch(0.92 0.005 0);
  --color-input:              oklch(0.92 0.005 0);
  --color-ring:               oklch(0.18 0.030 0);

  /* --- Custom blur step (32px â€” between Tailwind xl/2xl) --- */
  --blur-3xl: 32px;

  /* --- Easing --- */
  --ease-expo:  cubic-bezier(0.16, 1, 0.30, 1);
  --ease-quart: cubic-bezier(0.04, 0.62, 0.23, 0.98);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* --- Duration --- */
  --duration-fast: 0.2s;
  --duration-base: 0.4s;
  --duration-slow: 0.6s;
}

/* ============================================================
   BASE
   Runtime values that live outside @theme: component-specific
   tokens and dark mode palette/semantic overrides.
   ============================================================ */
@layer base {
  :root {
    /* --- Section spacing (responsive, overridden at md) --- */
    --spacing-section-py: 3rem;

    /* --- Surface --- */
    --surface-glass: color-mix(in oklch, var(--color-brand-3-100) 85%, transparent);

    /* --- Component: Navigation --- */
    --nav-trigger-bg:   var(--color-brand-1-950);
    --nav-trigger-text: var(--color-brand-3-100);
    --nav-menu-bg:      var(--color-brand-1-950);

    /* --- Component: Cards --- */
    --card-border:       var(--color-brand-3-200);
    --card-border-hover: var(--color-brand-3-300);
    --card-bg:           var(--color-brand-3-100);

    /* --- Component: Case studies --- */
    --case-nav-bg:   var(--color-brand-1-950);
    --case-nav-text: var(--color-brand-3-100);
    --case-tag-bg:   var(--color-brand-3-200);
    --case-tag-text: var(--color-brand-1-800);
  }

  .dark {
    /* --- Semantic overrides --- */
    --color-background:           oklch(0.15 0.010 127);
    --color-foreground:           var(--color-brand-1-50);
    --color-card:                 var(--color-brand-1-950);
    --color-card-foreground:      var(--color-brand-1-50);
    --color-popover:              var(--color-brand-3-950);
    --color-popover-foreground:   var(--color-brand-1-50);
    --color-primary:              var(--color-brand-1-700);
    --color-primary-foreground:   var(--color-brand-1-50);
    --color-secondary:            var(--color-brand-3-800);
    --color-secondary-foreground: var(--color-brand-1-100);
    --color-muted:                var(--color-brand-3-950);
    --color-muted-foreground:     var(--color-brand-3-400);
    --color-accent:               var(--color-brand-2-700);
    --color-accent-foreground:    var(--color-brand-1-50);
    --color-destructive:          oklch(0.35 0.12 25);
    --color-destructive-foreground: oklch(0.98 0.01 0);
    --color-border:               oklch(0.25 0.01 0);
    --color-input:                oklch(0.25 0.01 0);
    --color-ring:                 oklch(0.85 0.02 0);

    /* --- Surface --- */
    --surface-glass: color-mix(in oklch, var(--color-brand-3-950) 95%, transparent);

    /* --- Component: Navigation --- */
    --nav-trigger-bg:   var(--color-brand-1-50);
    --nav-trigger-text: var(--color-brand-1-950);
    --nav-menu-bg:      var(--color-brand-1-100);

    /* --- Component: Cards --- */
    --card-border:       var(--color-brand-3-800);
    --card-border-hover: var(--color-brand-3-700);
    --card-bg:           var(--color-brand-3-950);

    /* --- Component: Case studies --- */
    --case-nav-bg:   var(--color-brand-1-50);
    --case-nav-text: var(--color-brand-1-950);
    --case-tag-bg:   var(--color-brand-3-800);
    --case-tag-text: var(--color-brand-3-200);
  }

  * {
    @apply border-border;
  }

  html,
  body {
    @apply absolute bg-background text-foreground underline-offset-4;
  }

  ::selection {
    background-color: var(--color-foreground);
    color: var(--color-background);
  }
}

/* ============================================================
   COMPONENTS
   Reusable class abstractions over the token system.
   ============================================================ */
@layer components {
  /* --- Navigation --- */
  .nav-trigger {
    background-color: var(--nav-trigger-bg);
    color: var(--nav-trigger-text);
    @apply backdrop-blur-xl;
    transition: opacity var(--duration-fast) var(--ease-in-out);
  }

  .nav-trigger:hover {
    @apply opacity-80;
  }

  .nav-trigger:focus-visible {
    outline: 2px solid var(--color-ring);
    outline-offset: 2px;
  }

  .nav-menu {
    background-color: var(--nav-menu-bg);
    color: var(--nav-trigger-text);
    @apply backdrop-blur-3xl shadow-2xl ring-1 ring-black/10 dark:ring-white/10;
  }

  /* --- Hero --- */
  .hero-label {
    font-family: var(--font-display);
    @apply text-sm font-medium text-balance;
  }

  .hero-heading {
    @apply text-3xl lg:text-4xl text-balance;
  }

  /* --- Cards --- */
  .card-case-study {
    @apply relative rounded-md overflow-hidden backdrop-blur-sm;
    border: 1px solid var(--card-border);
    background-color: var(--card-bg);
    transition: border-color var(--duration-base) var(--ease-expo);
  }

  .card-case-study:hover {
    border-color: var(--card-border-hover);
    @apply backdrop-blur-xl;
  }

  .card-badge {
    @apply bg-white/5 border-white/10 text-[10px] uppercase tracking-widest py-1 px-3;
  }

  .card-image {
    @apply object-cover grayscale opacity-40;
    transition:
      opacity var(--duration-slow) var(--ease-expo),
      filter var(--duration-slow) var(--ease-expo);
  }

  .group:hover .card-image {
    @apply opacity-60 grayscale-0;
  }

  /* --- About --- */
  .about-heading {
    font-family: var(--font-display);
    @apply text-3xl md:text-4xl lg:text-5xl xl:text-6xl text-balance leading-[1.2];
  }

  .about-subheading {
    font-family: var(--font-display);
    @apply text-3xl font-light;
  }

  /* --- Layout --- */
  .section-container {
    padding-block: var(--spacing-section-py);
    @apply px-4 xl:px-8 max-w-7xl mx-auto;

    @media (width >= 768px) {
      --spacing-section-py: 4rem;
    }
  }

  /* --- Case study --- */
  .case-hero-heading {
    font-family: var(--font-display);
    @apply text-5xl md:text-6xl font-bold text-balance;
    line-height: 1.1;
  }

  .case-tag {
    background-color: var(--case-tag-bg);
    color: var(--case-tag-text);
    @apply px-3 py-1 rounded text-sm;
  }

  .case-section-label {
    @apply text-[10px] font-bold uppercase tracking-widest;
    color: var(--case-tag-text);
  }

  .case-preview-card {
    background-color: var(--surface-glass);
    @apply backdrop-blur-3xl rounded p-4;
    border: 1px solid var(--color-border);
  }

  /* --- Skill badges --- */
  .skill-badge {
    background-color: var(--card-bg);
    color: var(--color-foreground);
    border: 1px solid var(--card-border);
    @apply px-3 py-1 rounded text-sm;
    transition: border-color var(--duration-fast) var(--ease-in-out);
  }

  .skill-badge:hover {
    border-color: var(--card-border-hover);
  }
}

/* ============================================================
   REDUCED MOTION
   ============================================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
